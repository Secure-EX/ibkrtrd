# ğŸ“ˆ Portfolio Analysis Assistant (ç§äººæŠ•é¡¾)

[![Python](https://img.shields.io/badge/Python-3.12-blue)](https://www.python.org/)
[![IBKR API](https://img.shields.io/badge/IBKR-TWS%20API-red)](https://interactivebrokers.github.io/tws-api/)

## ğŸ“– é¡¹ç›®ç®€ä»‹ (Introduction)

è¿™æ˜¯ä¸€ä¸ªåŸºäº Python çš„è½»é‡çº§ä¸ªäººé‡åŒ–æŠ•ç ”ç³»ç»Ÿï¼Œä¸“ä¸º**å‘¨é¢‘äº¤æ˜“è€…**è®¾è®¡ã€‚å®ƒé€šè¿‡ `ib_insync` è¿æ¥ Interactive Brokers (IBKR) è·å–å³æ—¶è´¦æˆ·ä¸æŒä»“æ•°æ®ï¼Œç»“åˆ `pandas_ta` è¿›è¡Œæœ¬åœ°æŠ€æœ¯é¢åˆ†æï¼Œå¹¶å¼•å…¥ Gemini / Qwen 3.5 / Deepseek è¾…åŠ©è§£è¯»ï¼ˆè®¡åˆ’ä¸­ï¼‰ã€‚

**æ ¸å¿ƒç›®æ ‡**ï¼šè‡ªåŠ¨åŒ–æ•°æ®è·å–æµç¨‹ï¼Œæä¾›å®¢è§‚çš„æŠ€æœ¯æŒ‡æ ‡åˆ†æï¼Œå¹¶æ‰§è¡Œä¸¥æ ¼çš„äº¤æ˜“çºªå¾‹é£æ§ï¼ˆæ­¢æŸ/ä»“ä½ç®¡ç†ï¼‰ã€‚

## âœ¨ ä¸»è¦åŠŸèƒ½ (Features)

- **ğŸ”Œ IBKR æ— ç¼è¿æ¥**ï¼šè‡ªåŠ¨è¿æ¥ TWS/Gatewayï¼Œè·å–ç¾è‚¡ã€æ¸¯è‚¡å®æ—¶è¡Œæƒ…ã€‚
- **ğŸ”¬ åŸºæœ¬é¢åˆ†æ**ï¼šè·å–åŸºæœ¬é¢ä¼°å€¼ (PE/PB) ç­‰ã€‚
- **ğŸ“Š å¤šç»´æŠ€æœ¯åˆ†æ**ï¼š
  - è‡ªåŠ¨è®¡ç®— MA (10/20/30/60/120/200)ã€MACDã€RSIã€KDJã€BOLL (å‘¨çº¿/æœˆçº¿)ã€‚
  - **èµ°åŠ¿åˆ¤å®š**ï¼šè‡ªåŠ¨è¯†åˆ«å¤šå¤´/ç©ºå¤´æ’åˆ—ã€‚
  - **ä¼°å€¼åˆ†ä½**ï¼šåŸºäºè¿‡å»3å¹´ä»·æ ¼è®¡ç®— Price Percentileã€‚
- **ğŸ’¼ æŒä»“é€è§†**ï¼šä¸€é”®å¯¼å‡ºå½“å‰æŒä»“ã€å¹³å‡æˆæœ¬ã€æœªå®ç°ç›ˆäºï¼Œåˆ†ææŒä»“å¥åº·åº¦ã€‚
- **ğŸš¦ ä¿¡å·ç”Ÿæˆç³»ç»Ÿ**ï¼šåŸºäºæŠ€æœ¯æŒ‡æ ‡çš„è¯„åˆ†æœºåˆ¶ï¼Œè¾“å‡º Buy/Sell/Wait å»ºè®®ã€‚
- **ğŸ“‰ é£é™©æ§åˆ¶**ï¼šè‡ªåŠ¨ç›‘æµ‹æ­¢æŸä½ï¼Œè§¦å‘é£æ§é¢„è­¦ã€‚

## ğŸ› ï¸ æŠ€æœ¯æ ˆ (Tech Stack)

- **æ ¸å¿ƒè¯­è¨€**: Python 3.12
- **äº¤æ˜“æ¥å£**: `ib_insync` (è¿™ä¹Ÿæ˜¯ TWS API çš„æœ€ä½³å°è£…)
- **æ•°æ®åˆ†æ**: `pandas`, `pandas-ta`, `yfinance` (ç”¨äºè¡¥å…… PE/PB æ•°æ®)
- **æœªæ¥è®¡åˆ’**: `Streamlit` (å¯è§†åŒ–ä»ªè¡¨ç›˜), `Local LLM` (Qwen/DeepSeek ç”¨äºè´¢æŠ¥åˆ†æ)

## ğŸš€ å¿«é€Ÿå¼€å§‹ (Quick Start)

### 0. ğŸ“‚ é¡¹ç›®ç»“æ„ (Structure)
```
IBKR Portfolio Analysis Assistant/
â”œâ”€â”€ README.md                      # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ main.py                        # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ config.py                      # é…ç½®æ–‡ä»¶ï¼Œå­˜æ”¾è´¦æˆ·IDæˆ–ç«¯å£å·
â”œâ”€â”€ data_pull/                     # æ•°æ®æ‹‰å–æ¨¡å—æ–‡ä»¶å¤¹
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ data_pull.py               # æ•°æ®æ‹‰å–
â”œâ”€â”€ strategies/                    # ç­–ç•¥æ¨¡å—æ–‡ä»¶å¤¹
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ fundamental_analysis       # åŸºæœ¬é¢åˆ†æ
â”‚   â”œâ”€â”€ technical_analysis.py      # æŠ€æœ¯æŒ‡æ ‡è®¡ç®—é€»è¾‘
â”‚   â”œâ”€â”€ risk_analysis.py           # é£é™©åˆ†æ (èƒœç‡/èµ”ç‡)
â”‚   â””â”€â”€ emotional_analysis.py      # å¸‚åœºæƒ…ç»ªåˆ†æ
â”œâ”€â”€ report_generate/               # è¾“å‡ºç»“æœ
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ report_generate.py         # ç”ŸæˆæŠ¥å‘Š
â”œâ”€â”€ data/                          # æœ¬åœ°æ•°æ®å­˜å‚¨ (å¾…å‡çº§ä¸ºå¸¦åˆ†åŒºçš„ Postgres SQL æ•°æ®åº“)
â”‚   â””â”€â”€ input/                     # è¾“å…¥å†…å®¹
â”‚       â”œâ”€â”€ portfolio/             # æŒä»“å¿«ç…§
â”‚           â””â”€â”€ yyyymmdd
â”‚       â”œâ”€â”€ transactions/          # äº¤æ˜“æµæ°´
â”‚           â””â”€â”€ yyyymmdd
â”‚       â”œâ”€â”€ market/                # å¤§ç›˜æŒ‡æ•° (SPX, HSI) (OHLC)
â”‚           â””â”€â”€ yyyymmdd
â”‚       â”œâ”€â”€ stock/                 # ä¸ªè‚¡ (OHLC)
â”‚           â””â”€â”€ yyyymmdd
â”‚       â”œâ”€â”€ fundamental/           # è´¢æŠ¥/åŸºæœ¬é¢
â”‚           â””â”€â”€ yyyymmdd
â”‚       â””â”€â”€ emotional/             # æƒ…ç»ªæ•°æ®(æ–°é—»/èˆ†æƒ…)
â”‚           â””â”€â”€ yyyymmdd
â”‚   â””â”€â”€ output/                    # è¾“å‡ºå†…å®¹
â”‚       â”œâ”€â”€ technical/             # æŠ€æœ¯æŒ‡æ ‡è®¡ç®—ç»“æœ
â”‚           â””â”€â”€ yyyymmdd
â”‚       â”œâ”€â”€ risk/                  # èƒœç‡/èµ”ç‡/é£æ§åˆ†æ
â”‚           â””â”€â”€ yyyymmdd
â”‚       â””â”€â”€ summary/               # æœ€ç»ˆç”Ÿæˆçš„å‘¨æŠ¥/æ€»ç»“
â”‚           â””â”€â”€ yyyymmdd
â””â”€â”€  requirements.txt              # æ¨¡ç»„åˆ—è¡¨
```

### 1. ğŸŒ ç¯å¢ƒè¦æ±‚ (Environment)
- æ“ä½œç³»ç»Ÿ: Windows / macOS / Linux (æœ¬é¡¹ç›®åœ¨ i7-6700 Windows ç¯å¢ƒä¸‹ä¼˜åŒ–æµ‹è¯•)
- å·²å®‰è£… [IBKR TWS (Trader Workstation)](https://www.interactivebrokers.com/en/trading/tws.php) æˆ– IB Gatewayã€‚

### 2. ğŸ ä¸»è¦å®‰è£…ä¾èµ– (Major Dependency)
```bash
pip install ib_insync pandas pandas_ta yfinance
```

### âš ï¸ å…è´£å£°æ˜ (Disclaimer)
æœ¬é¡¹ç›®ä»…ç”¨äºç¼–ç¨‹å­¦ä¹ ä¸è¾…åŠ©åˆ†æï¼Œä¸æ„æˆä»»ä½•æŠ•èµ„å»ºè®®ã€‚é‡‘èå¸‚åœºæœ‰é£é™©ï¼Œè‡ªåŠ¨åŒ–äº¤æ˜“å¯èƒ½å¯¼è‡´èµ„é‡‘æŸå¤±ï¼Œè¯·è°¨æ…ä½¿ç”¨ã€‚å¼€å‘è€…ä¸å¯¹å› ä½¿ç”¨æœ¬é¡¹ç›®äº§ç”Ÿçš„ä»»ä½•ç›ˆäºè´Ÿè´£ã€‚
